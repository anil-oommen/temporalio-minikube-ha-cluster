apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: SetupResources
deploy: 
  kubectl:
    flags:
      disableValidation: false
manifests:
  rawYaml: 
    - minikube-setup-resources.yaml
portForward:
- resourceType: service
  resourceName: cassandra
  namespace: default
  port: 9042
  localPort: 9042

---
apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: DeployPrometheus
deploy: 
  helm:
    releases:
      - name: pr
        remoteChart: prometheus-repo/prometheus
        valuesFiles:
          - values-prometheus-basic.yaml
portForward:
- resourceType: service
  resourceName: pr-prometheus-server
  namespace: default
  port: 80
  localPort: 18080

---
apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: DeployElasticsearch
deploy: 
  helm:
    releases:
      - name: es
        remoteChart: elastic-repo/elasticsearch
        version: 8.5.1
        valuesFiles:
          - values-elasticsearch-on-multinode.yaml
portForward:
- resourceType: service
  resourceName: es-elasticsearch-master
  namespace: default
  port: 9200
  localPort: 9200

---
apiVersion: skaffold/v4beta6
kind: Config
metadata:
  name: DeployCassandra
deploy: 
  helm:
    releases:
      - name: cassandra
        chartPath: cass-helm/.
        valuesFiles:
          - cass-helm/values.yaml
        version: 10.4.2
portForward:
- resourceType: service
  resourceName: cassandra
  namespace: default
  port: 9042
  localPort: 9042
